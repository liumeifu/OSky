@{
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "组织机构管理";
    ViewBag.NodeDataUrl = Url.Action("NodeData");
}
<div class="easyui-layout" data-options="fit:true">
    <div data-options="region:'west', split:true, minWidth:100, width:250, title:'组织机构'">
        <div class="easyui-panel" style="padding:5px">
            <ul id="tree-organization" class="easyui-tree" data-options="url:'@ViewBag.NodeDataUrl',method:'get',animate:true"></ul>
        </div>
    </div>
    <div data-options="region:'center',title:'机构设置'">
        @Html.Partial("Edit")
        @*<div id="p" class="easyui-panel" style="width: 100%; height: 100%; padding: 10px; "></div>*@
        @*<iframe id="ifrUrl" width="100%" height="100%" src="@Url.Action("VisitEdit", new { id = 0 })" frameborder="0" marginheight="0" marginwidth="0"></iframe>*@
</div>

@section footer{
    <script type="text/javascript">
        $(function () {
            //treeFun();
            @*$('#p').panel('refresh', '@Url.Action("VisitEdit", "Organizations", new { id = 0 })');*@

        })
        
        function treeFun() {
            var $tree = $("#tree-organization");
            $tree.tree({
                url: "@ViewBag.NodeDataUrl",
                onSelect: function (node) {
                    $('#ifrUrl').attr('src', "@Url.Action("Edit")" + "id=" + node.id);
                  
                }
            });
        }
    </script>
    }