@{
    ViewBag.Title = "表单信息列表";
    Layout = "~/Areas/Admin/Views/Shared/_DataGridLayout.cshtml";

    ViewBag.GridId = "flowForm";
    ViewBag.GridDataUrl = Url.Action("GridData");
    ViewBag.NodeDataUrl = Url.Action("NodeData", "Organizations");
    ViewBag.AddUrl = Url.Action("Add");
    ViewBag.EditUrl = Url.Action("Edit");
    ViewBag.DeleteUrl = Url.Action("Delete");
}
@section customScript
{
    <script type="text/javascript">
        var selectTreeData = null;
        columns = [[
            { field: "Id", title: "编号", width: 40, halign: "center", align: "right", sortable: true },
            { field: "FormName", title: "表单名称", width: 150, sortable: true, editor: { type: "validatebox", options: { required: true, validType: "length[1,50]" } } },
            { field: "Type", title: "表单类型", width: 80, sortable: true, formatter: formatBoolean, editor: { type: "combobox", options: { required: true, data: $.OSky.data.bool, valueField: "id", textField: "text" } } },
            { field: "CreatorUserName", title: "创建人姓名", width: 80, sortable: true, formatter: formatBoolean, editor: { type: "combobox", options: { required: true, data: $.OSky.data.bool, valueField: "id", textField: "text" } } },
            { field: "CreatedTime", title: "创建时间", width: 80, sortable: true, formatter: formatBoolean, editor: { type: "combobox", options: { required: true, data: $.OSky.data.bool, valueField: "id", textField: "text" } } },
            { field: "FilePath", title: "表单路径", width: 80, sortable: true, formatter: formatBoolean, editor: { type: "combobox", options: { required: true, data: $.OSky.data.bool, valueField: "id", textField: "text" } } },
            { field: "ActionPath", title: "保存Action", width: 300, sortable: true, editor: { type: "textarea", options: { validType: "length[1,500]" } } },
            { field: "EnabledFlow", title: "流程与否", width: 300, sortable: true, editor: { type: "textarea", options: { validType: "length[1,500]" } } },
            { field: "Status", title: "状态信息", width: 150, halign: "center", align: "center", sortable: true, formatter: function (value) { return $.OSky.tools.formatDate(value); } }
        ]];

        startfunction = function() {
            //功能权限
            function functionPermission() {

                $.OSky.layer.msg.info("设置角色的功能权限");
            }
            //toolbarData.push("-");
            toolbarData.push({ text: "功能权限", iconCls: "pic_94", handler: functionPermission });
        };

        @*endfunction = function() {
            var $tree = $("#tree-@ViewBag.TreeId");
            $tree.tree({
                url: "@ViewBag.NodeDataUrl",
                onSelect: function(node) {
                    selectTreeData = node;
                    grid.datagrid({
                        url: "@ViewBag.GridDataUrl/" + node.id,
                        onBeforeEdit: function(index, row) {
                            row.OrganizationId = node.id;
                        }
                    });
                }
            });
            grid.datagrid({
                onBeforeEdit: function (index, row) {
                    if (selectTreeData == null) {
                        $.OSky.layer.msg.error("请选择组织机构，再进入编辑。");
                        return false;
                    }
                }
            });
        };*@
    </script>
}
@*@section headHtml
    {
        <div id="layout-@ViewBag.GridId" class="easyui-layout" data-options="fit:true">
            <div data-options="region:'west', split:true, minWidth:80, width:150, title:'组织机构'">
                <ul id="tree-@ViewBag.TreeId" class="easyui-tree"></ul>
            </div>
            <div data-options="region:'center', border:false">
    }
    @section footHtml
    {
            </div>
        </div>
    }*@